/***  mp3ex08.txt  ***/
/***  s16306  3J43  廣瀬 翔  ***/

1．課題
	「ledpwm.c」では高速点滅を眼で確認できなかったと思う。
	LEDをデューティ比50％で駆動し，1周期をどれくらいにすると点滅を眼で確認できてしまうのか，
	境界を実験により求めなさい。そのためのプログラムを作って確認しなさい。
	
	実行の様子を観察し，その様子を実行結果として報告しなさい。
	
2．使用したプログラム
	/**********************************************************
	LEDのPWM(PulseWidthModulation)駆動
	**********************************************************/
	#include <3048fone.h>
	#include "h8_3048fone.h"

	void waitmsec(int msec)
	/*msec間なにもしない時間稼ぎ関数*/
	{
		int i,j;
		for (i=0;i<msec;i++) {
			for (j=0;j<4190;j++);    /*4190は実測によって求めた値 25MHz駆動*/
		}
	}

	main()
	{
		int i,t=12;/*t=周期/2*/
		initLed(); /*LEDの初期化*/
		turnOnLed(0); /*LED0のON*/
		while(1) {
			/*デューティ比50%*/
			turnOnLed(1); /*LED1のON*/
			waitmsec(t);
			turnOffLed(1); /*LED1のOFF*/
			waitmsec(t);
		}
	}
	/*t=13
	ほんのわずかの点滅が確認できる
	t=12
	点滅見えない
	*/



3．実行結果
	
	LED0:常時点灯
	
	変数tを変化させることで，LED2の点滅周期を変化させた．
	t=13のとき，ほんのわずか点滅が確認できたが，
	t=12に変化させると，点滅が見えなくなった．
	
	t=12の時：周期は24ミリ秒(0.024）
	周波数は1/0.024=41Hzになると見えないが，
	t=13の時：周期は26ミリ秒(0.026）
	周波数は1/0.026=38Hzになるとギリギリ見える．
	
4．考察
	実験結果より，
	LEDの点滅は約80Hz程度から点滅できなくなるのではないか．
	
	実際にインターネットで調べてみたところ，人間の目のちらつきの限度は
	50Hz〜60Hz程度であった．
	ただし自分の計算結果と一致しないが，
	1．LEDを真正面から見た場合であるため
	2．人によってちらつきの感度の限界には差があるため
	
	個々の実験結果には差があるのではないかと考えた．
	
	少し気になったので蛍光灯の点滅周波数をインターネットで調べてみたが，
	平均的に100Hz〜120Hzであることが分かった．
	
5．まとめ
	点滅の周期が短いと人の目は点灯しているように見えることは今までの課題で理解したが，
	自分の感度を実際に計測したことがなかったので勉強になった．
