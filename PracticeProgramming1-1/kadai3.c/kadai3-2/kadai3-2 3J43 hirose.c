#include <stdio.h>
#define NUMBER 256
/*関数宣言*********************************************************************/
int Insertion(int number[],int c);
void Display(int number[]);
int Shell(int number[],int c);
void Copy(int n1[],int n2[]);
/*main*************************************************************************/
int main(){

	FILE *fp;
	FILE *fp2;
	int c=0,c2=0;//count
	int number[NUMBER];
	int number2[NUMBER]={0};
	char filename[200];//ファイル名
	char file[200];//ファイル
	char extension[200];//拡張子
	
	//ファイルの読み込み
	
	printf("読み込むファイル名を入力してください＞");
	scanf("%s",filename);
	sprintf(file,"%s.txt",filename);
	fp=fopen(file,"r");
	if (fp==NULL){
		printf("can't open a file\n");
		exit(1);
	}
	for(int i=0;i<NUMBER;i++)fscanf(fp,"%d",&number[i]);
	fclose(fp);
	
	//読み込み終わり
	Copy(number,number2);
	//ソート
	
	printf("=====挿入ソート=====\n");
	printf("\nソート前\n");
	Display(number);
	printf("\nソート後\n");
	c=Insertion(number,c);
	Display(number);
	printf("\n=====シェルソート=====\n");
	printf("\nソート前\n");
	Display(number2);
	printf("\nソート後\n");
	c2=Shell(number2,c2);
	Display(number2);
	
	//ソート終わり
	printf("\n==========データ交換回数==========\n");
	printf("\n挿入ソート：%d回\n",c);
	printf("シェルソート：%d回\n",c2);
	
	//ファイルへの出力
	printf("\n書き出しファイルの拡張子を入力＞");
	scanf("%s",extension);
	sprintf(file,"%s.%s",filename,extension);
	fp2=fopen(file,"w");
	if(fp2==NULL){
		printf("can't open a file\n");
		exit(1);
	}
	for(int i=0;i<NUMBER;i++)fprintf(fp2,"%d\n",number[i]);
	fclose(fp2);
	printf("\n書き出し完了");
	//出力終わり
	return 0;
}
/*挿入ソート************************************************************/
int Insertion(int number[],int c){
	int i,j,next;
	for(i=1;i<NUMBER;i++){
		next=number[i];
		for(j=i;j>=1 && number[j-1]>next;j--){
			number[j]=number[j-1];
			c++;
		}
		number[j]=next;
	}
	return c;
}
/*シェルソート****************************************************************************/
int Shell(int number[],int c){
	int i,j,k,h= 1,next;
	while(h<=NUMBER)h=h*3+1;
	h=h/3;
	while(h>=1){
		for(i=0;i<h;i++){
			for(j=h+i;j<NUMBER;j=j+h){
				next=number[j];
				for(k=j;h<=k && number[k-h] > next;k=k-h){
					number[k]=number[k-h];
					c++;
				}
				number[k]=next;
			}

		}
		h=h/3;
	}
	return c;
}
/*コピー*****************************************************************/
void Copy(int n1[],int n2[]){
	for(int i=0;i<NUMBER;i++){
		n2[i]=n1[i];
	}
}
/*表示*****************************************************************/
void Display(int number[]){
	for(int j=0;j<NUMBER;j++){
			printf("%4d",number[j]);
	}
}

/*実行結果

読み込むファイル名を入力してください＞sample
=====挿入ソート=====

ソート前
  26  91  88   8  82  22  69  72   9  37  89  97  97  93   0  75  78  39  81  87  19   4  96  54  37  30  59  39  25  35  14  29  50  36  25  75  63  38   1  32  32  92  20  61  24  74  55  80   5  44  49  44  13  76   9  14  28  52  16  74  47  81  50  33  49   7  98  29  78  31   0  67  78  58  92  94  86  89  60  16  77  11  79  20  80  34  90  51  34  10  90  17   4  30  62  70  50  42  12   2  40  53  75  82  21  25  68  19  85  30  95  38  27  64  87  45   3  96  23  83  57  55  15  99  31  91  64  99  62  83  18  41  59  67   8   6  23  14  18   7   8  46  83   1  62  68   5  63  39  84  58  40  85  28  77  89  43  21  36  65  47  35  54  41  87  26  17  58  27  35   6  22   3  69  61  57  98  11  84  82  19  44  91   1  33  10  43  71  55  60  92  52  71  16   0  80  56  24  85  17  60  48  13  46  51  26  71  67  76  21  73  42  41  94  88  37  93  65  28  98  57   3  48  12  46  23  66  51  76   5  42  53  73  15  33  66  73  69  66  56   2  95  32  96  53  70  94  10  45  48   7  79  72  86  64  12
ソート後
   0   0   0   1   1   1   2   2   3   3   3   4   4   5   5   5   6   6   7   7   7   8   8   8   9   9  10  10  10  11  11  12  12  12  13  13  14  14  14  15  15  16  16  16  17  17  17  18  18  19  19  19  20  20  21  21  21  22  22  23  23  23  24  24  25  25  25  26  26  26  27  27  28  28  28  29  29  30  30  30  31  31  32  32  32  33  33  33  34  34  35  35  35  36  36  37  37  37  38  38  39  39  39  40  40  41  41  41  42  42  42  43  43  44  44  44  45  45  46  46  46  47  47  48  48  48  49  49  50  50  50  51  51  51  52  52  53  53  53  54  54  55  55  55  56  56  57  57  57  58  58  58  59  59  60  60  60  61  61  62  62  62  63  63  64  64  64  65  65  66  66  66  67  67  67  68  68  69  69  69  70  70  71  71  71  72  72  73  73  73  74  74  75  75  75  76  76  76  77  77  78  78  78  79  79  80  80  80  81  81  82  82  82  83  83  83  84  84  85  85  85  86  86  87  87  87  88  88  89  89  89  90  90  91  91  91  92  92  92  93  93  94  94  94  95  95  96  96  96  97  97  98  98  98  99  99
=====シェルソート=====

ソート前
  26  91  88   8  82  22  69  72   9  37  89  97  97  93   0  75  78  39  81  87  19   4  96  54  37  30  59  39  25  35  14  29  50  36  25  75  63  38   1  32  32  92  20  61  24  74  55  80   5  44  49  44  13  76   9  14  28  52  16  74  47  81  50  33  49   7  98  29  78  31   0  67  78  58  92  94  86  89  60  16  77  11  79  20  80  34  90  51  34  10  90  17   4  30  62  70  50  42  12   2  40  53  75  82  21  25  68  19  85  30  95  38  27  64  87  45   3  96  23  83  57  55  15  99  31  91  64  99  62  83  18  41  59  67   8   6  23  14  18   7   8  46  83   1  62  68   5  63  39  84  58  40  85  28  77  89  43  21  36  65  47  35  54  41  87  26  17  58  27  35   6  22   3  69  61  57  98  11  84  82  19  44  91   1  33  10  43  71  55  60  92  52  71  16   0  80  56  24  85  17  60  48  13  46  51  26  71  67  76  21  73  42  41  94  88  37  93  65  28  98  57   3  48  12  46  23  66  51  76   5  42  53  73  15  33  66  73  69  66  56   2  95  32  96  53  70  94  10  45  48   7  79  72  86  64  12
ソート後
   0   0   0   1   1   1   2   2   3   3   3   4   4   5   5   5   6   6   7   7   7   8   8   8   9   9  10  10  10  11  11  12  12  12  13  13  14  14  14  15  15  16  16  16  17  17  17  18  18  19  19  19  20  20  21  21  21  22  22  23  23  23  24  24  25  25  25  26  26  26  27  27  28  28  28  29  29  30  30  30  31  31  32  32  32  33  33  33  34  34  35  35  35  36  36  37  37  37  38  38  39  39  39  40  40  41  41  41  42  42  42  43  43  44  44  44  45  45  46  46  46  47  47  48  48  48  49  49  50  50  50  51  51  51  52  52  53  53  53  54  54  55  55  55  56  56  57  57  57  58  58  58  59  59  60  60  60  61  61  62  62  62  63  63  64  64  64  65  65  66  66  66  67  67  67  68  68  69  69  69  70  70  71  71  71  72  72  73  73  73  74  74  75  75  75  76  76  76  77  77  78  78  78  79  79  80  80  80  81  81  82  82  82  83  83  83  84  84  85  85  85  86  86  87  87  87  88  88  89  89  89  90  90  91  91  91  92  92  92  93  93  94  94  94  95  95  96  96  96  97  97  98  98  98  99  99
==========データ交換回数==========

挿入ソート：16029回
シェルソート：1284回

書き出しファイルの拡張子を入力＞a

書き出し完了

*/
